{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "_comment": "n8n Credential Templates for QI Research Pipeline",
  "_instructions": [
    "This file contains credential templates for n8n workflow automation.",
    "Import these into n8n via Settings > Credentials > Import from File.",
    "Replace all placeholder values (marked with YOUR_*) with actual credentials.",
    "Never commit this file with real credentials to version control."
  ],
  "credentials": [
    {
      "name": "Claude API - QI Research",
      "type": "httpHeaderAuth",
      "description": "Anthropic Claude API credentials for LLM operations",
      "data": {
        "name": "x-api-key",
        "value": "YOUR_ANTHROPIC_API_KEY"
      },
      "nodesAccess": [
        {
          "nodeType": "n8n-nodes-base.httpRequest",
          "displayName": "Claude API Request"
        }
      ],
      "_usage": {
        "baseUrl": "https://api.anthropic.com/v1",
        "endpoints": {
          "messages": "/messages",
          "completions": "/complete"
        },
        "headers": {
          "anthropic-version": "2023-06-01",
          "content-type": "application/json"
        },
        "models": [
          "claude-sonnet-4-20250514",
          "claude-3-opus-20240229",
          "claude-3-haiku-20240307"
        ]
      }
    },
    {
      "name": "PostgreSQL - QI Research DB",
      "type": "postgres",
      "description": "PostgreSQL database credentials for project data storage",
      "data": {
        "host": "YOUR_DB_HOST",
        "port": 5432,
        "database": "qi_research_pipeline",
        "user": "YOUR_DB_USER",
        "password": "YOUR_DB_PASSWORD",
        "ssl": "disable",
        "sslMode": "disable"
      },
      "nodesAccess": [
        {
          "nodeType": "n8n-nodes-base.postgres",
          "displayName": "QI Research Database"
        }
      ],
      "_usage": {
        "connectionPooling": true,
        "maxConnections": 10,
        "idleTimeoutMs": 30000,
        "tables": {
          "projects": "Main project data with JSONB columns for stage data",
          "users": "User accounts and authentication",
          "documents": "Generated document metadata",
          "references": "Literature references from research stage",
          "audit_log": "Comprehensive audit trail"
        }
      }
    },
    {
      "name": "SMTP - QI Research Notifications",
      "type": "smtp",
      "description": "SMTP credentials for email notifications and alerts",
      "data": {
        "host": "YOUR_SMTP_HOST",
        "port": 587,
        "secure": false,
        "user": "YOUR_SMTP_USER",
        "password": "YOUR_SMTP_PASSWORD",
        "sender": "QI Research Pipeline <noreply@your-domain.com>"
      },
      "nodesAccess": [
        {
          "nodeType": "n8n-nodes-base.emailSend",
          "displayName": "QI Research Email"
        }
      ],
      "_usage": {
        "templates": {
          "projectCreated": "Notification when a new project is created",
          "stageCompleted": "Notification when a pipeline stage completes",
          "approvalRequired": "Request for stage approval",
          "documentReady": "Notification when documents are generated",
          "submissionComplete": "Final submission confirmation"
        },
        "recipientTypes": {
          "projectOwner": "Principal investigator of the project",
          "teamMembers": "All project team members",
          "administrators": "System administrators for oversight"
        }
      }
    },
    {
      "name": "PubMed API - Literature Search",
      "type": "httpHeaderAuth",
      "description": "NCBI PubMed API credentials for literature search operations",
      "data": {
        "name": "api_key",
        "value": "YOUR_PUBMED_API_KEY"
      },
      "nodesAccess": [
        {
          "nodeType": "n8n-nodes-base.httpRequest",
          "displayName": "PubMed API Request"
        }
      ],
      "_usage": {
        "baseUrl": "https://eutils.ncbi.nlm.nih.gov/entrez/eutils",
        "endpoints": {
          "search": "/esearch.fcgi",
          "fetch": "/efetch.fcgi",
          "summary": "/esummary.fcgi",
          "info": "/einfo.fcgi"
        },
        "parameters": {
          "db": "pubmed",
          "retmode": "json",
          "retmax": 100
        },
        "rateLimit": {
          "withApiKey": "10 requests/second",
          "withoutApiKey": "3 requests/second"
        },
        "searchFields": {
          "title": "[Title]",
          "abstract": "[Abstract]",
          "author": "[Author]",
          "journal": "[Journal]",
          "mesh": "[MeSH Terms]",
          "publicationType": "[Publication Type]"
        }
      }
    }
  ],
  "workflowVariables": {
    "_comment": "Environment variables for n8n workflows (use port 7401 for Docker deployment)",
    "QI_RESEARCH_API_URL": "http://localhost:7401/api",
    "QI_RESEARCH_WEBHOOK_SECRET": "YOUR_WEBHOOK_SECRET",
    "DEFAULT_TIMEOUT_MS": 30000,
    "MAX_RETRIES": 3,
    "RETRY_DELAY_MS": 1000
  },
  "integrationSettings": {
    "claude": {
      "defaultModel": "claude-sonnet-4-20250514",
      "maxTokens": 4096,
      "temperature": 0.7,
      "systemPrompts": {
        "classification": "You are an expert in healthcare research methodology...",
        "literatureReview": "You are a systematic review specialist...",
        "methodologyDesign": "You are a research methodology expert...",
        "ethicsAssessment": "You are a healthcare ethics specialist...",
        "documentGeneration": "You are a medical writing professional..."
      }
    },
    "pubmed": {
      "defaultRetMax": 50,
      "dateRange": "5y",
      "sortOrder": "relevance",
      "filters": {
        "humans": true,
        "english": true,
        "fullTextAvailable": false
      }
    },
    "email": {
      "defaultPriority": "normal",
      "attachmentsEnabled": true,
      "maxAttachmentSizeMB": 10
    }
  }
}
